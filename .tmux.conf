# Tmux 配置文件

# copy mode 
# key bindings
bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-selection
# 鼠标选中复制但不退出 copy mode
bind-key -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe

# 新 window / pane 继承当前 pane 的目录（现代 tmux 推荐方式）
bind c  new-window  -c "#{pane_current_path}"
bind '"' split-window -v -c "#{pane_current_path}"
bind %  split-window -h -c "#{pane_current_path}"

# 添加无需确认的关闭 pane 快捷键
# prefix + K (大写K) = 直接关闭 pane，无需确认
bind-key K kill-pane
# prefix + y for popup 
bind-key y command-prompt -p "Popup run:" \
  "display-popup -E -d '#{pane_current_path}' -w 90% -h 90% zsh -ic '%%'"

# 鼠标支持
set -g mouse on
setw -g mode-keys vi

# 从 1 开始编号窗口和面板（0 太远了）
set -g base-index 1
setw -g pane-base-index 1

# 更长的历史记录
set -g history-limit 10000

# 更快的命令序列（减少 ESC 延迟）
set -s escape-time 0

# 启用焦点事件透传（让 Neovim 能收到 FocusGained/FocusLost）
set -g focus-events on

# highlight focused pane
set -g pane-border-status top
set -g pane-border-format "#{?pane_active, #{b:pane_current_path} | #{pane_current_command} , #{b:pane_current_path} | #{pane_current_command} }"
# colour2 -> Terminal ANSI green
set -g pane-active-border-style "fg=colour2,bold"

# Status bar configuration
set -g status on
set -g status-left-length 20
set -g status-interval 5
set -g status-right '#(~/.tmux-status.sh) #h'
# 透明
set -g status-style 'bg=default,fg=default'

set -g allow-passthrough on
set -g set-clipboard on

